<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Demo Ficha de Clientes</title>
    <link href="Content/bootstrap.css" rel="stylesheet" />
</head>
<body>
    <br />
    <div class="container-fluid">
        <div class="row">
            <div class="col-1"></div>
            <div class="col-10">
                <div class="card ">
                    <div class="card-header">
                        <h1>Ficha del Clientes</h1>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label>Identificador</label>
                                    <input id="CustomerID" name="CustomerID" placeholder="" class="form-control" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label>Empresa</label>
                                    <input id="CompanyName" name="CompanyName" placeholder="" class="form-control" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label>Persona de Contacto</label>
                                    <input id="ContactName" name="ContactName" placeholder="" class="form-control" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label>Teléfono</label>
                                    <input id="Phone" name="Phone" placeholder="" class="form-control" />
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <label>Fax</label>
                                    <input id="Fax" name="Fax" placeholder="" class="form-control" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="form-group">
                                    <label>Ciudad</label>
                                    <input id="City" name="City" placeholder="" class="form-control" />
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <label>Country</label>
                                    <input id="Country" name="Country" placeholder="" class="form-control" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col text-right">
                        <img src="images/ajax-loader.gif" id="wait" style="display:none;" />
                        &nbsp;
                        <button id="b1" class="btn btn-success">Consultar</button>
                    </div>
                </div>
                <br />
            </div>
            <div class="col-1"></div>
        </div>
    </div>
    <script>
        document.getElementById('b1').onclick = function (e) {
            if (document.getElementById('CustomerID').value == '') return;

            var xhr = new XMLHttpRequest();
            var url = '/api/clientes.ashx?id=' + document.getElementById('CustomerID').value;

            xhr.open('get', url, true);
            xhr.onreadystatechange = function (e) {
                if (xhr.readyState == 4) {
                    if (xhr.status == 200) {
                        var datos = JSON.parse(xhr.responseText);

                        document.getElementById('CompanyName').value = datos[0].CompanyName;
                        document.getElementById('ContactName').value = datos[0].ContactName;
                        document.getElementById('Phone').value = datos[0].Phone;
                        document.getElementById('Fax').value = datos[0].Fax;
                        document.getElementById('Country').value = datos[0].Country;
                        document.getElementById('City').value = datos[0].City;
                    }
                    else alert('Ufff');

                    document.getElementById('wait').style.display = 'none';
                }
            };
            document.getElementById('wait').style.display = 'inline';
            xhr.send();
        }
    </script>
</body>
</html>